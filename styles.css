:root{
  --ink:#111;
  --paper:#fff;
  --mid:#7a7a7a;
  --light:#bcbcbc;
  --gap:16px;
  --radius:14px;
  color-scheme: light only;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:16px/1.35 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:var(--paper); color:var(--ink);
}
.wrap{
  min-height:100%;
  display:grid;
  grid-template-rows:auto auto 1fr auto;
  gap:var(--gap);
  padding:clamp(10px,2vw,20px);
}

/* cartão “e-ink” simples (sem linhas) */
.eink{
  border:2px solid var(--ink);
  border-radius:var(--radius);
  background:var(--paper);
  box-shadow:0 2px 0 inset var(--ink), 0 4px 0 var(--ink);
  padding:clamp(12px,1.6vw,18px);
}

/* título */
.titlebar{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:end;
  gap:10px;
}
.titlebar h1{margin:0; font-weight:800; letter-spacing:.4px}
#nowDate{color:var(--mid)}

/* HERO */
.hero{
  display:grid;
  grid-template-columns:minmax(280px,520px) 1fr;
  gap:var(--gap);
  align-items:center;
}
.hero-main{display:flex; gap:18px; align-items:center}
.sunball{
  width:110px; height:110px; border-radius:50%;
  background:#e8e8e8; border:6px solid var(--ink);
  box-shadow:8px 8px 0 0 var(--ink) inset;
}
.temp{font-size:clamp(52px,8vw,120px); line-height:.9; font-weight:900; letter-spacing:-2px}
.temp .deg{font-size:.36em; margin-left:6px}
.feels{color:var(--mid); margin-top:4px}
.windline{margin-top:6px; color:var(--mid)}

.stats{
  display:grid;
  grid-template-columns:repeat(2,minmax(180px,1fr));
  gap:10px 18px;
  align-content:start;
}
.row{display:flex; justify-content:space-between; gap:16px; border-bottom:1px dotted var(--ink); padding:6px 0}
.row:last-child{border-bottom:0}
.k{color:var(--mid)}

/* parte de baixo */
.bottom{
  display:grid;
  grid-template-columns:360px 1fr;
  gap:var(--gap);
  min-height:0;
}
.forecast{display:flex; align-items:center; justify-content:center}
.mini-forecast{list-style:none; margin:0; padding:0; display:flex; gap:14px}
.mini-forecast li{
  min-width:92px; text-align:center;
  border:2px dashed var(--ink); border-radius:10px; padding:10px 12px;
}
.mini-forecast .d{font-weight:700}
.mini-forecast .t{color:var(--mid); font-size:.92rem}

/* gráfico */
.chart-title{font-weight:800; margin-bottom:6px}
.dot{display:inline-block; width:10px; height:10px; border-radius:50%; border:2px solid var(--ink); margin-right:6px}
.dot.t{background:#ddd}
.dot.r{background:#999}
.chart.eink{
  display:grid; grid-template-rows:auto 1fr auto; gap:8px;
  height:clamp(240px,46vh,440px); min-height:0; overflow:hidden;
}
.chart-canvas{min-height:0}
.chart-canvas canvas{width:100%; height:100% !important; display:block}

/* footer */
.footer{display:flex; justify-content:flex-end}
#staleFlag.ok{color:#0a0}
#staleFlag.stale{color:#b00; font-weight:700}

/* responsivo */
@media (max-width: 980px){
  .hero{grid-template-columns:1fr}
  .bottom{grid-template-columns:1fr; }
  .forecast{order:1}
  .chart{order:2}
  .titlebar{grid-template-columns:1fr; text-align:center}
  .hero-main{justify-content:center}
  .mini-forecast{justify-content:center}
}
